function _0x4c89(_0x3c77de,_0x4114dd){const _0x237898=_0x2378();return _0x4c89=function(_0x4c8909,_0x3824ce){_0x4c8909=_0x4c8909-0xa9;let _0x2b6196=_0x237898[_0x4c8909];if(_0x4c89['hyzyRT']===undefined){var _0x16df4f=function(_0x38fbca){const _0x37bc50='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x132f88='',_0x5cbebc='';for(let _0x14721a=0x0,_0x345884,_0x5949f5,_0x1e576e=0x0;_0x5949f5=_0x38fbca['charAt'](_0x1e576e++);~_0x5949f5&&(_0x345884=_0x14721a%0x4?_0x345884*0x40+_0x5949f5:_0x5949f5,_0x14721a++%0x4)?_0x132f88+=String['fromCharCode'](0xff&_0x345884>>(-0x2*_0x14721a&0x6)):0x0){_0x5949f5=_0x37bc50['indexOf'](_0x5949f5);}for(let _0x31ca43=0x0,_0x469558=_0x132f88['length'];_0x31ca43<_0x469558;_0x31ca43++){_0x5cbebc+='%'+('00'+_0x132f88['charCodeAt'](_0x31ca43)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5cbebc);};_0x4c89['hseSOp']=_0x16df4f,_0x3c77de=arguments,_0x4c89['hyzyRT']=!![];}const _0x4d1977=_0x237898[0x0],_0x248f95=_0x4c8909+_0x4d1977,_0x3f7cb0=_0x3c77de[_0x248f95];return!_0x3f7cb0?(_0x2b6196=_0x4c89['hseSOp'](_0x2b6196),_0x3c77de[_0x248f95]=_0x2b6196):_0x2b6196=_0x3f7cb0,_0x2b6196;},_0x4c89(_0x3c77de,_0x4114dd);}function _0x2378(){const _0x1ea1c7=['nta5ndKZnKXgrvnKqG','zxHWB3j0CW','C3j6veK','Bg9N','DxbKyxrLtgfZDfzLCMLMAwvK','ChDesvm','u2rPBfq','C2f2zuXPy2vUC2u','u2npEKu','v01gB2C','De9yAKm','yMnYExb0ANm','wvbvwLO','w0f1DgHtzxj2AwnLxsdSNBJSPP0G7iUK7yYOoG','w0f1DgHtzxj2AwnLxsdROzZSU6WG7kca7j6LioYlPo2mQdO','w0f1DgHtzxj2AwnLxsa17j28ioY0IoQZVcWGrMLYzxn0B3jLioYERoYDUoYMNsdSI5ZRJ4qUlI4','nda4r3LfCenO','zMLYzwjHC2uVzMLYzxn0B3jL','CgHHCM1Hy3Loyw1L','66gC7lUSioYDUoYMNsdSHlhQS7u','nJC1tef1vunx','zxD4qNC','mtq3ote2ELPZD3nz','mty4mtiWodfsre1lsem','w0f1DgHtzxj2AwnLxsbgAxjLyMfZzsdSNBJSPP0G7iUC7kcqioQ4SoUHNsdSI6tTJkG6','BgLJzw5ZzuTLEq','Exnbwgm','Axnby3rPDMu','A295AwK','w0f1DgHtzxj2AwnLxsbgAxjLyMfZzEYxKcdSNBJSPP0G7iUC7kcqioQ4SoUHNsdSMytRO4W','nJy5mJDOver0A1K','BgLJzw5ZzuTLEuHHC2G','yxv0AgvUDgLJyxrPB25dB3vUDa','ndK5mdqXrgPOEurH','zxjYB3i','whzlEhu','BwvZC2fNzq','wxH6tM8','zw1HAwW','Dg9ju09tDhjPBMC','zxHPC3rZ','BNHhr2u','7j247kADioYKKsdSMktRPzJQSiaG67cC7ioD7zAi7iQ164Ui64UKoIa','rMLYzxn0B3jLioYERoYDUoYMNsdSHlhQS7u','7j247kADioYeSEQZTq','w0f1DgHtzxj2AwnLxsdROzZSU6WG7kgW7zQmioYlPo2mQdO','wMXAvfG','y29TCgfYzq','EwPHuLG','7j6S7j247kAD7j20io2vHoYALo2vQEUlIoUlPdOG','lI9MAxjLyMfZzvnLCNzPy2u','zvHSsxm','mta5mZe5mdbPzLLJuvC','z2v0tgLJzw5Zzq','BgfZDfzLCMLMAwvKqxq','mty5mZzWwwTZAKS','65oX66gD65cy7kEaioYvIUYDGcdSNBtRQztSNBZSNOxRI4JRI6qU','B3DUzxjoyw1L','BxnNwwu','C3vJy2vZCW','7jw96RwT66Qf7j20ioYDVoY5Mo2vMoYNGcdSLyRSIRxRI4JRI6qU','mJDvt0fftxO','wNv3DKm','weneC0i'];_0x2378=function(){return _0x1ea1c7;};return _0x2378();}const _0x5612ca=_0x4c89;(function(_0x219b4b,_0x147031){const _0x10f6ba=_0x4c89,_0x36d530=_0x219b4b();while(!![]){try{const _0x2e9812=parseInt(_0x10f6ba(0xba))/0x1+-parseInt(_0x10f6ba(0xaf))/0x2*(-parseInt(_0x10f6ba(0xd6))/0x3)+parseInt(_0x10f6ba(0xd0))/0x4*(parseInt(_0x10f6ba(0xad))/0x5)+-parseInt(_0x10f6ba(0xa9))/0x6*(parseInt(_0x10f6ba(0xb7))/0x7)+parseInt(_0x10f6ba(0xd9))/0x8+-parseInt(_0x10f6ba(0xb0))/0x9+parseInt(_0x10f6ba(0xcd))/0xa;if(_0x2e9812===_0x147031)break;else _0x36d530['push'](_0x36d530['shift']());}catch(_0x11b0e8){_0x36d530['push'](_0x36d530['shift']());}}}(_0x2378,0xe77b9));const {doc,getDoc,updateDoc,serverTimestamp}=require(_0x5612ca(0xaa)),bcrypt=require(_0x5612ca(0xe4)),{getDb}=require(_0x5612ca(0xcb)),OFFLINE_DAYS=0x5;async function verifyLicense(_0x51782d,_0x4a604e,_0x1eefbf,_0x2b8ad3){const _0x4b83d4=_0x5612ca,_0x50bccf={'ewxBw':'약국장명이\x20일치하지\x20않습니다.','XCDsB':function(_0x213cc6){return _0x213cc6();},'wVsqg':_0x4b83d4(0xd1),'YxzNo':'인증키가\x20일치하지\x20않습니다.','xAgkF':function(_0x142acf,_0x19f489,_0xa23f64){return _0x142acf(_0x19f489,_0xa23f64);},'ScOzE':function(_0x20687b){return _0x20687b();},'ysAXc':_0x4b83d4(0xbc),'tOXjC':_0x4b83d4(0xc5),'krSQW':_0x4b83d4(0xc3)};try{const _0x5ed0ef=_0x50bccf[_0x4b83d4(0xd8)](getDb),_0x5e30fc=doc(_0x5ed0ef,'licenses',_0x1eefbf),_0x3b372e=await getDoc(_0x5e30fc);if(!_0x3b372e[_0x4b83d4(0xc1)]())return{'success':![],'message':_0x50bccf['wVsqg']};const _0x404b4f=_0x3b372e['data']();if(_0x404b4f['pharmacyName']!==_0x51782d)return{'success':![],'message':_0x4b83d4(0xd5)};if(_0x404b4f['ownerName']!==_0x4a604e)return{'success':![],'message':'약국장명이\x20일치하지\x20않습니다.'};if(!_0x404b4f[_0x4b83d4(0xb4)])return{'success':![],'message':'비활성화된\x20라이선스입니다.'};const _0x2d8f29=await bcrypt[_0x4b83d4(0xc8)](_0x2b8ad3,_0x404b4f[_0x4b83d4(0xb8)]);if(!_0x2d8f29)return{'success':![],'message':_0x50bccf[_0x4b83d4(0xbe)]};try{await _0x50bccf['xAgkF'](updateDoc,_0x5e30fc,{'lastAuthenticatedAt':_0x50bccf[_0x4b83d4(0xe1)](serverTimestamp),'authenticationCount':(_0x404b4f[_0x4b83d4(0xb9)]||0x0)+0x1}),console[_0x4b83d4(0xdc)](_0x4b83d4(0xb6));}catch(_0x3847b4){if(_0x50bccf[_0x4b83d4(0xb3)]===_0x4b83d4(0xbc))console[_0x4b83d4(0xbb)](_0x4b83d4(0xb1),_0x3847b4);else return{'success':![],'message':_0x50bccf[_0x4b83d4(0xae)]};}return{'success':!![],'message':_0x50bccf[_0x4b83d4(0xe3)],'data':{'pharmacyName':_0x404b4f[_0x4b83d4(0xab)],'ownerName':_0x404b4f[_0x4b83d4(0xd2)],'email':_0x1eefbf,'licenseKey':_0x2b8ad3}};}catch(_0x4c8a04){return console[_0x4b83d4(0xbb)](_0x4b83d4(0xe6),_0x4c8a04),{'success':![],'message':_0x50bccf['krSQW']+_0x4c8a04[_0x4b83d4(0xbd)]};}}function saveLicenseToLocal(_0x2de6c2,_0x37cf6b){const _0x28b736=_0x5612ca,_0x3c16d9={'lEpSX':_0x28b736(0xe7)};try{return _0x2de6c2[_0x28b736(0xe0)]({'pharmacyName':_0x37cf6b[_0x28b736(0xab)],'ownerName':_0x37cf6b[_0x28b736(0xd2)],'email':_0x37cf6b[_0x28b736(0xbf)],'licenseKey':_0x37cf6b[_0x28b736(0xb2)],'isActivated':0x1,'lastVerifiedAt':new Date()[_0x28b736(0xc0)]()});}catch(_0x364059){return console['error'](_0x3c16d9['lEpSX'],_0x364059),![];}}function getLocalLicense(_0x23686c){const _0x4f0eba=_0x5612ca,_0x17c5ad={'yjaRX':_0x4f0eba(0xc6)};try{return _0x23686c[_0x4f0eba(0xce)]();}catch(_0x31302c){return console[_0x4f0eba(0xbb)](_0x17c5ad[_0x4f0eba(0xc9)],_0x31302c),null;}}async function checkLicenseOnStartup(_0xcea7f9){const _0x5353b8=_0x5612ca,_0x24527b={'sJeOD':_0x5353b8(0xe7),'YPUZZ':function(_0xa45ca0,_0x2ca7c7){return _0xa45ca0(_0x2ca7c7);},'koyii':function(_0x38f751,_0x569efd){return _0x38f751-_0x569efd;},'eXlIs':_0x5353b8(0xe8),'ZlZTX':function(_0x483ce0,_0xd1963,_0x3c2e77,_0x23acfa,_0x534a9b){return _0x483ce0(_0xd1963,_0x3c2e77,_0x23acfa,_0x534a9b);},'SdilT':_0x5353b8(0xca),'nxGGe':function(_0x149c98,_0x3b37fa){return _0x149c98/_0x3b37fa;},'pwDIS':function(_0x1e3f83,_0x201b2c){return _0x1e3f83*_0x201b2c;},'msgYe':_0x5353b8(0xe2),'cpaWL':'네트워크\x20오류,\x20로컬\x20인증\x20사용','srzTI':'인증\x20체크\x20중\x20오류\x20발생'};try{const _0x2be0d5=_0x24527b[_0x5353b8(0xe5)](getLocalLicense,_0xcea7f9);if(!_0x2be0d5)return{'needsAuth':!![],'message':'라이선스가\x20등록되지\x20않았습니다.'};const _0x5d6f51=new Date(_0x2be0d5['lastVerifiedAt']),_0x354aef=new Date(),_0x16f02d=_0x24527b[_0x5353b8(0xb5)](_0x354aef,_0x5d6f51)/(0x3e8*0x3c*0x3c*0x18);if(_0x16f02d<=OFFLINE_DAYS)return{'needsAuth':![],'license':_0x2be0d5,'message':_0x5353b8(0xac)};console[_0x5353b8(0xdc)](_0x24527b[_0x5353b8(0xcc)]);const _0x4c0170=await _0x24527b[_0x5353b8(0xc7)](verifyLicense,_0x2be0d5['pharmacyName'],_0x2be0d5[_0x5353b8(0xd2)],_0x2be0d5[_0x5353b8(0xbf)],_0x2be0d5['licenseKey']);return _0x4c0170[_0x5353b8(0xd4)]?(_0xcea7f9[_0x5353b8(0xdd)](),{'needsAuth':![],'license':_0x2be0d5,'message':_0x5353b8(0xc4)}):{'needsAuth':!![],'message':_0x24527b[_0x5353b8(0xdf)]+_0x4c0170[_0x5353b8(0xbd)]};}catch(_0xc17edf){console[_0x5353b8(0xbb)]('[AuthService]\x20시작\x20시\x20인증\x20체크\x20실패:',_0xc17edf);const _0x3d4737=getLocalLicense(_0xcea7f9);if(_0x3d4737){const _0x1e4ace=new Date(_0x3d4737[_0x5353b8(0xcf)]),_0x50e8d1=new Date(),_0x467f4a=_0x24527b[_0x5353b8(0xc2)](_0x50e8d1-_0x1e4ace,_0x24527b[_0x5353b8(0xde)](0x3e8*0x3c*0x3c,0x18));if(_0x467f4a<=OFFLINE_DAYS)return _0x5353b8(0xd7)===_0x24527b[_0x5353b8(0xd3)]?(_0x33a910[_0x5353b8(0xbb)](_0x24527b['sJeOD'],_0x3f63d7),![]):{'needsAuth':![],'license':_0x3d4737,'message':_0x24527b['cpaWL']};}return{'needsAuth':!![],'message':_0x24527b[_0x5353b8(0xdb)]};}}module[_0x5612ca(0xda)]={'verifyLicense':verifyLicense,'saveLicenseToLocal':saveLicenseToLocal,'getLocalLicense':getLocalLicense,'checkLicenseOnStartup':checkLicenseOnStartup};